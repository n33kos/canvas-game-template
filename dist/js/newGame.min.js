!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("newGame",[],t):"object"==typeof exports?exports.newGame=t():e.newGame=t()}(window,function(){return function(n){var i={};function a(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=n,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=e,this.y=t}return i(n,[{key:"toArray",value:function(){return[this.x,this.y]}}]),n}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=n(6),r=(i=o)&&i.__esModule?i:{default:i};var s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.name="Default Level",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.default),a(n,[{key:"gameLogic",value:function(){}}]),n}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=r(n(6)),f=r(n(0)),o=r(n(20));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e)),n=e.dimensions,i=void 0===n?new f.default(100,100):n,a=e.offset,o=void 0===a?new f.default(.5,.5):a,r=e.position,s=void 0===r?new f.default:r,u=e.rotation,l=void 0===u?0:u;return t.absoluteOffset=new f.default,t.audioNodes=[],t.canvasPosition=new f.default,t.controlCallbackIds=[],t.dimensions=i,t.GameState=GameState,t.offset=o,t.position=s,t.rotation=l,t.setPosition(s),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,a.default),i(c,[{key:"setPosition",value:function(e){this.position=e,this.canvasPosition=(0,o.default)(this.GameState,this.position),this.calculateOffset()}},{key:"calculateOffset",value:function(){this.absoluteOffset=new f.default(-this.offset.x*this.dimensions.x,-this.offset.y*this.dimensions.y)}},{key:"drawEntity",value:function(){this.GameState.Canvas.ctx.translate(this.canvasPosition.x,this.canvasPosition.y),this.GameState.Canvas.ctx.rotate(this.rotation),this.GameState.Canvas.ctx.translate(this.absoluteOffset.x,this.absoluteOffset.y),this.draw(),this.GameState.Canvas.ctx.setTransform(1,0,0,1,0,0)}},{key:"update",value:function(){}},{key:"draw",value:function(){}}]),c}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Math.random()*(t-e)+e}},function(e,t,n){"use strict";function i(a,o,r,s){var u,l=0;return"boolean"!=typeof o&&(s=r,r=o,o=void 0),function(){var e=this,t=Number(new Date)-l,n=arguments;function i(){l=Number(new Date),r.apply(e,n)}s&&!u&&i(),u&&clearTimeout(u),void 0===s&&a<t?i():!0!==o&&(u=setTimeout(s?function(){u=void 0}:i,void 0===s?a-t:a))}}Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=i,t.debounce=function(e,t,n){return void 0===n?i(e,t,!1):i(e,n,!1!==t)}},function(e,t,n){"use strict";var r=n(13),s=n(14);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var o=0;o<16;++o)t[i+o]=a[o];return t||s(a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.GameState=e,this.audioNodes=[],this.controlCallbackIds=[]}return i(t,[{key:"load",value:function(){}},{key:"unload",value:function(){var t=this;this.audioNodes.forEach(function(e){e.stop(0)}),this.audioNodes=[],this.controlCallbackIds.forEach(function(e){t.GameState.Controls.removeCallback(e)}),this.controlCallbackIds=[]}},{key:"addControlsCallback",value:function(e,t){this.controlCallbackIds.push(this.GameState.Controls.addCallback(e,t))}},{key:"addAudioNode",value:function(e){this.audioNodes.push(e),e.load()}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=o(n(2)),m=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e)),n=e.animations,i=e.currentFrame,a=void 0===i?0:i,o=e.currentAnimation,r=void 0===o?null:o,s=e.mirrorX,u=void 0!==s&&s,l=e.mirrorY,c=void 0!==l&&l,f=e.scale,h=void 0===f?new m.default(1,1):f;return t.animations=n,t.currentAnimation=r,t.currentFrame=a,t.scale=h,t.mirrorX=u,t.mirrorY=c,t.lastAnimation=null,t.tickCounter=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,a.default),i(d,[{key:"load",value:function(){var n=this;Object.keys(this.animations).forEach(function(e){var t=new Image;t.src=n.animations[e].spriteSheet,n.animations[e].image=t})}},{key:"calculateOffset",value:function(){this.scale&&(this.absoluteOffset=new m.default(-this.offset.x*this.dimensions.x*this.scale.x*(this.mirrorX?-1:1),-this.offset.y*this.dimensions.y*this.scale.y*(this.mirrorY?-1:1)))}},{key:"draw",value:function(){this.animations[this.currentAnimation]&&(this.handleFrames(),(this.mirrorX||this.mirrorY)&&this.GameState.Canvas.ctx.scale(this.mirrorX?-1:1,this.mirrorY?-1:1),this.GameState.Canvas.ctx.drawImage(this.animations[this.currentAnimation].image,this.currentFrame*this.dimensions.x,0,this.dimensions.x,this.dimensions.y,0,0,this.dimensions.x*this.scale.x,this.dimensions.y*this.scale.y))}},{key:"handleFrames",value:function(){this.tickCounter++,this.animations[this.currentAnimation].loop&&(this.incrementAnimationFrame(),this.currentFrame>=this.animations[this.currentAnimation].frames&&(this.currentFrame=0)),this.animations[this.currentAnimation].loop||(this.currentFrame>=this.animations[this.currentAnimation].frames-1?(this.tickCounter=0,this.currentFrame=this.animations[this.currentAnimation].frames-1):this.incrementAnimationFrame()),this.lastAnimation!==this.currentAnimation&&(this.lastAnimation=this.currentAnimation,this.currentFrame=0,this.tickCounter=0)}},{key:"incrementAnimationFrame",value:function(){this.tickCounter>this.animations[this.currentAnimation].ticksPerFrame&&(this.tickCounter=0,this.currentFrame+=1)}}]),d}();t.default=r},function(e,t,n){"use strict";var i=f(n(9)),a=f(n(10)),o=f(n(11)),r=f(n(15)),s=f(n(29)),u=f(n(30)),l=f(n(31)),c=f(n(32));function f(e){return e&&e.__esModule?e:{default:e}}var h={Audio:i.default,Canvas:a.default,Controls:o.default,GameState:r.default,Render:s.default,Scene:u.default,UI:l.default,Update:c.default};document.addEventListener("DOMContentLoaded",function(e){var t=new h.GameState;t.init(),(window.GameState=t).Audio=new h.Audio(t),t.Canvas=new h.Canvas(t),t.Canvas.init(),t.Controls=new h.Controls(t),t.Controls.init(),t.Scene=new h.Scene(t),t.Scene.init(),t.Render=new h.Render(t),t.Render.init(),t.Update=new h.Update(t),t.Update.init(),t.UI=new h.UI(t),t.UI.init()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.GameState=e,this.audioContext=null,this.masterAudioNode=null,this.isInitialized=!1}return i(t,[{key:"init",value:function(){var e=new(window.AudioContext||window.webkitAudioContext),t=(this.audioContext=e).createGain();t.gain.value=.75,t.connect(e.destination),this.masterAudioNode=t,this.isInitialized=!0}},{key:"toggleMute",value:function(){"running"===this.audioContext.state?this.audioContext.suspend():"suspended"===this.audioContext.state&&this.audioContext.resume()}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=n(4);var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.GameState=e,this.cx=null,this.cy=null,this.canvas=null,this.ctx=null,this.scale=1}return i(t,[{key:"init",value:function(){this.setDimensions(),this.initCanvas()}},{key:"setDimensions",value:function(){this.scale=window.devicePixelRatio,this.width=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)*this.scale,this.height=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)*this.scale}},{key:"initCanvas",value:function(){var e=this,t=document.querySelector("canvas");t.width=this.width,t.height=this.height,this.cx=this.width/2,this.cy=this.height/2;var n=(this.canvas=t).getContext("2d");this.ctx=n,this.resizeCanvas(),window.addEventListener("resize",(0,a.throttle)(500,function(){e.setDimensions(),e.resizeCanvas()}))}},{key:"resizeCanvas",value:function(){this.canvas.width=this.width,this.canvas.height=this.height,this.cx=this.width/2,this.cy=this.height/2,this.ctx.imageSmoothingEnabled=!1}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=n(4),o=u(n(12)),r=u(n(5)),s=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.GameState=e,this.isMouseDown=!1,this.lastPosition=null,this.pressedKeys=[],this.debounceValue=10,this.callbacks=o.default.callbacks}return i(t,[{key:"addCallback",value:function(e,t){var n=(0,r.default)();return this.callbacks[e].push({uuid:n,callBack:t}),n}},{key:"clearCallbacks",value:function(){this.callbacks=o.default.callbacks}},{key:"removeCallback",value:function(t){var n=this;Object.keys(this.callbacks).forEach(function(e){n.callbacks[e]=n.callbacks[e].filter(function(e){return e.uuid!==t})})}},{key:"init",value:function(){var t=this;document.addEventListener("mousemove",(0,a.throttle)(this.debounceValue,function(e){return t.handleMouseMove(e)})),document.addEventListener("mousedown",function(e){return t.handleMouseDown(e)}),document.addEventListener("mouseup",function(e){return t.handleMouseUp(e)}),document.addEventListener("touchmove",(0,a.throttle)(this.debounceValue,function(e){return t.handleTouchMove(e)})),document.addEventListener("touchstart",function(e){return t.handleTouchStart(e)}),document.addEventListener("touchend",function(e){return t.handleTouchEnd(e)}),document.onkeydown=this.handleKeyDown.bind(this),document.onkeyup=this.handleKeyUp.bind(this)}},{key:"handleTouchStart",value:function(t){this.setLastPosition(t),this.isMouseDown=!0,this.callbacks.touchStart.forEach(function(e){return(0,e.callBack)(t)})}},{key:"handleTouchEnd",value:function(t){this.setLastPosition(t),this.isMouseDown=!1,this.callbacks.touchEnd.forEach(function(e){return(0,e.callBack)(t)})}},{key:"handleTouchMove",value:function(t){t.preventDefault(),this.isMouseDown&&!this.GameState.isPaused&&(this.setLastPosition(t),this.callbacks.touchMove.forEach(function(e){return(0,e.callBack)(t)}))}},{key:"handleMouseDown",value:function(t){this.setLastPosition(t),this.isMouseDown=!0,this.callbacks.mouseDown.forEach(function(e){return(0,e.callBack)(t)})}},{key:"handleMouseUp",value:function(t){this.setLastPosition(t),this.isMouseDown=!1,this.callbacks.mouseUp.forEach(function(e){return(0,e.callBack)(t)})}},{key:"handleMouseMove",value:function(t){this.isMouseDown&&!this.GameState.isPaused&&(this.setLastPosition(t),this.callbacks.mouseMove.forEach(function(e){return(0,e.callBack)(t)}))}},{key:"handleKeyDown",value:function(t){this.pressedKeys.includes(t.keyCode)||this.pressedKeys.push(t.keyCode),this.callbacks.keyDown.forEach(function(e){return(0,e.callBack)(t)})}},{key:"handleKeyUp",value:function(t){var e=this.pressedKeys.indexOf(t.keyCode);-1<e&&this.pressedKeys.splice(e,1),this.callbacks.keyUp.forEach(function(e){return(0,e.callBack)(t)})}},{key:"setLastPosition",value:function(e){"clientX"in e&&(this.lastPosition=new s.default(e.clientX*this.GameState.Canvas.scale,e.clientY*this.GameState.Canvas.scale)),"targetTouches"in e&&(this.lastPosition=new s.default(e.targetTouches[0].clientX*this.GameState.Canvas.scale,e.targetTouches[0].clientY*this.GameState.Canvas.scale))}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={callbacks:{mouseDown:[],mouseUp:[],mouseMove:[],touchStart:[],touchEnd:[],touchMove:[],keyDown:[],keyUp:[]}}},function(e,t,n){"use strict";var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var a=new Uint8Array(16);e.exports=function(){return i(a),a}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t,n){"use strict";for(var a=[],i=0;i<256;++i)a[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=a;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=s(n(16)),o=s(n(1)),r=s(n(17));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.deltaTime=a.default.deltaTime,this.isPaused=a.default.isPaused,this.level=a.default.level,this.levels=a.default.levels,this.score=a.default.score,this.playerName=a.default.playerName,this.currentLevel=new o.default({GameState:this})}return i(e,[{key:"init",value:function(){this.initLevels()}},{key:"initLevels",value:function(){var t=this;this.levels=r.default.map(function(e){return new e(t)})}},{key:"loadLevel",value:function(){var e=this.levels[this.level];e.load(),this.currentLevel=e,document.activeElement.blur()}},{key:"play",value:function(){this.isPaused=!1,this.loadLevel()}},{key:"restart",value:function(){this.endlevel(),this.play()}},{key:"quit",value:function(){this.endlevel(),this.UI.setScreen("level")}},{key:"togglePause",value:function(){this.isPaused=!this.isPaused,this.isPaused&&this.Audio.audioContext.resume(),this.isPaused||this.Audio.audioContext.suspend()}},{key:"endlevel",value:function(){this.currentLevel.unload(),this.score=a.default.score}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={deltaTime:1,isPaused:!0,level:0,levels:[],playerName:"Player 1",score:0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(18)),a=r(n(21)),o=r(n(23));function r(e){return e&&e.__esModule?e:{default:e}}t.default=[a.default,o.default,i.default]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=u(n(19)),o=u(n(1)),r=u(n(3)),s=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.name="Color Cubes",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.default),i(n,[{key:"load",value:function(){this.GameState.Scene.clear();for(var e=0;e<1e3;e++){var t=new a.default({GameState:this.GameState,color:"rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")",position:new s.default((0,r.default)(-this.GameState.Canvas.cx,this.GameState.Canvas.cx),(0,r.default)(-this.GameState.Canvas.cy,this.GameState.Canvas.cy)),dimensions:new s.default(30,30),velocity:new s.default(100*Math.random(),100*Math.random())});this.GameState.Scene.add(t)}}}]),n}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=a(n(2)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e)),n=e.color,i=e.velocity;return t.color=n,t.velocity=i,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o.default),i(a,[{key:"update",value:function(){this.rotation+=.01*this.GameState.deltaTime,this.velocity=new r.default(.99*this.velocity.x,.99*this.velocity.y),this.setPosition(new r.default(this.position.x+this.velocity.x,this.position.y+this.velocity.y)),this.boundingBox()}},{key:"boundingBox",value:function(){(this.position.x>this.GameState.Canvas.cx||this.position.x<-this.GameState.Canvas.cx)&&(this.velocity.x*=-1),(this.position.y>this.GameState.Canvas.cy||this.position.y<-this.GameState.Canvas.cy)&&(this.velocity.y*=-1)}},{key:"draw",value:function(){this.GameState.Canvas.ctx.beginPath(),this.GameState.Canvas.ctx.fillStyle=this.color,this.GameState.Canvas.ctx.rect(0,0,this.dimensions.x,this.dimensions.y),this.GameState.Canvas.ctx.fill()}}]),a}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(0),o=(i=a)&&i.__esModule?i:{default:i};t.default=function(e,t){return new o.default(t.x+e.Canvas.width/2,e.Canvas.height-(t.y+e.Canvas.height/2))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=s(n(1)),o=(s(n(3)),s(n(0))),r=s(n(22));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.name="Grid",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),i(n,[{key:"load",value:function(){var t=this;this.GameState.Scene.clear(),this.grid=[],this.rows=8,this.columns=6,this.minDimension=Math.min(this.GameState.Canvas.width,this.GameState.Canvas.height),this.minimumPadding=200,this.cellSize=(this.minDimension-this.minimumPadding)/this.rows,this.padding=new o.default((this.GameState.Canvas.width-this.cellSize*this.rows)/2,(this.GameState.Canvas.height-this.cellSize*this.columns)/2);for(var e=0;e<this.columns;e++)for(var n=0;n<this.rows;n++){var i=new r.default({GameState:this.GameState,strokeStyle:"#ccc",fillStyle:"white",lineWidth:2,dimensions:new o.default(this.cellSize,this.cellSize),id:n+"_"+e,x:n,y:e});i.position=new o.default(n*this.cellSize+this.padding.x,e*this.cellSize+this.padding.y),this.GameState.Scene.add(i),this.grid.push(i)}this.GameState.Scene.gameObjects.forEach(function(e){e.init(t.GameState.Scene.gameObjects)}),this.addControlsCallback("mouseUp",this.handleClick.bind(this))}},{key:"handleClick",value:function(e){var t=this.getClickedCell(this.GameState.Controls.lastPosition);t&&t.rotateCell(1)}},{key:"getClickedCell",value:function(e){var t=Math.floor((e.x-this.padding.x)/this.cellSize),n=Math.floor((e.y-this.padding.y)/this.cellSize);return this.grid.find(function(e){return e.id===t+"_"+n})}}]),n}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=r(n(2)),o=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e)),n=e.strokeStyle,i=e.fillStyle,a=e.lineWidth,o=e.x,r=e.y,s=e.id;return t.strokeStyle=n,t.fillStyle=i,t.lineWidth=a,t.x=o,t.y=r,t.id=s,t.wasMouseDown=!1,t.neighborPattern=[],.25<Math.random()&&t.neighborPattern.push(0),.25<Math.random()&&t.neighborPattern.push(1),.25<Math.random()&&t.neighborPattern.push(2),.25<Math.random()&&t.neighborPattern.push(3),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,a.default),i(u,[{key:"init",value:function(e){this.grid=e,this.neighbors=this.getNeighbors()}},{key:"getNeighbors",value:function(){var t=this,e=[];return this.neighborPattern.includes(0)&&e.push(this.grid.find(function(e){return e.id==t.x-1+"_"+t.y})),this.neighborPattern.includes(1)&&e.push(this.grid.find(function(e){return e.id==t.x+"_"+(t.y-1)})),this.neighborPattern.includes(2)&&e.push(this.grid.find(function(e){return e.id==t.x+1+"_"+t.y})),this.neighborPattern.includes(3)&&e.push(this.grid.find(function(e){return e.id==t.x+"_"+(t.y+1)})),e}},{key:"update",value:function(){}},{key:"rotateCell",value:function(t){this.neighborPattern=this.neighborPattern.map(function(e){return(e+=t)<0&&(e=3),3<e&&(e=0),e}),this.neighbors=this.getNeighbors()}},{key:"drawEntity",value:function(){this.drawFill(),this.drawOutline(),this.drawPathways()}},{key:"drawFill",value:function(){this.GameState.Canvas.ctx.beginPath(),this.GameState.Canvas.ctx.rect(this.position.x,this.position.y,this.dimensions.x,this.dimensions.y),this.GameState.Canvas.ctx.fillStyle=this.fillStyle,this.GameState.Canvas.ctx.fill()}},{key:"drawOutline",value:function(){this.GameState.Canvas.ctx.beginPath(),this.GameState.Canvas.ctx.lineWidth=this.lineWidth,this.GameState.Canvas.ctx.rect(this.position.x,this.position.y,this.dimensions.x,this.dimensions.y),this.GameState.Canvas.ctx.strokeStyle=this.strokeStyle,this.GameState.Canvas.ctx.stroke()}},{key:"drawPathways",value:function(){var a=this;this.neighborPattern.forEach(function(e){var t=a.dimensions.x/2,n=new o.default(a.position.x+t,a.position.y+t),i=new o.default(a.position.x+t,a.position.y+t);0===e&&(i.x-=t),1===e&&(i.y-=t),2===e&&(i.x+=t),3===e&&(i.y+=t),a.GameState.Canvas.ctx.beginPath(),a.GameState.Canvas.ctx.lineWidth=5,a.GameState.Canvas.ctx.strokeStyle="limegreen",a.GameState.Canvas.ctx.moveTo(n.x,n.y),a.GameState.Canvas.ctx.lineTo(i.x,i.y),a.GameState.Canvas.ctx.stroke()})}}]),u}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=c(n(24)),o=c(n(25)),r=c(n(1)),s=c(n(26)),u=(c(n(3)),c(n(27))),l=c(n(0));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.name="Sprites",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.default),i(n,[{key:"load",value:function(){this.GameState.Scene.clear(),this.addBGMusic(),this.addGround(),this.addCharacter(),this.addNonLoopingSprite()}},{key:"addBGMusic",value:function(){var e=new a.default({audioFileUrl:"./audio/examples/bg.mp3",autoPlay:!0,GameState:this.GameState,shouldLoop:!0});this.addAudioNode(e)}},{key:"addCharacter",value:function(){var e=new u.default({GameState:this.GameState,dimensions:new l.default(21,32),offset:new l.default(.5,1),scale:new l.default(10,10),initialheight:285-this.GameState.Canvas.cy});e.setPosition(new l.default(0,320-this.GameState.Canvas.cy)),this.GameState.Scene.add(e)}},{key:"addNonLoopingSprite",value:function(){var e=new s.default({GameState:this.GameState,dimensions:new l.default(32,32),scale:new l.default(10,10)});this.GameState.Scene.add(e)}},{key:"addGround",value:function(){var e=new o.default({GameState:this.GameState,offset:new l.default(0,0),dimensions:new l.default(this.GameState.Canvas.width,32),position:new l.default(-this.GameState.Canvas.cx,320-this.GameState.Canvas.cy),imageUrl:"./img/examples/ground.png",repeat:"repeat-x",scale:new l.default(10,10)});this.GameState.Scene.add(e)}}]),n}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function o(e){var t=e.audioFileUrl,n=e.autoPlay,i=e.GameState,a=e.shouldLoop;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.audioFileUrl=t,this.autoPlay=n,this.GameState=i,this.shouldLoop=a,this.audioNode=null,this.buffer=null}return i(o,[{key:"load",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=new XMLHttpRequest;n.responseType="arraybuffer",n.onload=function(){e.createBufferFromData(n.response,t)},n.open("GET",this.audioFileUrl,!0),n.send()}},{key:"createBufferFromData",value:function(e,t){var n=this;this.GameState.Audio.audioContext.decodeAudioData(e,function(e){n.buffer=e,n.autoPlay&&n.play(),t&&t()})}},{key:"play",value:function(){this.audioNode=this.GameState.Audio.audioContext.createBufferSource(),this.audioNode.buffer=this.buffer,this.audioNode.connect(this.GameState.Audio.masterAudioNode),this.audioNode.loop=this.shouldLoop,this.audioNode.start()}},{key:"stop",value:function(){this.audioNode.stop(0)}}]),o}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=o(n(2)),s=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e)),n=e.imageUrl,i=e.repeat,a=e.scale,o=void 0===a?new s.default(1,1):a;return t.imageUrl=n,t.repeat=i,t.scale=o,t.pattern=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.default),i(r,[{key:"load",value:function(){var e=this,t=new Image;t.onload=function(){e.pattern=e.GameState.Canvas.ctx.createPattern(t,e.repeat)},t.src=this.imageUrl}},{key:"calculateOffset",value:function(){this.scale&&(this.offset=new s.default(-this.origin.x*this.dimensions.x*this.scale.x,-this.origin.y*this.dimensions.y*this.scale.y))}},{key:"draw",value:function(){this.GameState.Canvas.ctx.beginPath(),this.GameState.Canvas.ctx.rect(0,0,this.dimensions.x*this.scale.x,this.dimensions.y*this.scale.y),this.GameState.Canvas.ctx.fillStyle=this.pattern,this.GameState.Canvas.ctx.scale(this.scale.x,this.scale.y),this.GameState.Canvas.ctx.fill()}}]),r}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(7));a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.animations={count:{frames:5,loop:!1,spriteSheet:"./img/examples/numbers.png",ticksPerFrame:20}},t.currentAnimation="count",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default),n}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=s(n(7)),o=s(n(0)),r=n(28);function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.moveSpeed=6,t.animations={idle:{frames:12,loop:!0,spriteSheet:"./img/examples/idle.png",ticksPerFrame:4},run:{frames:8,loop:!0,spriteSheet:"./img/examples/run.png",ticksPerFrame:4},jump:{frames:4,loop:!0,spriteSheet:"./img/examples/jump.png",ticksPerFrame:12}},t.initialHeight=e.initialheight,t.yVelocity=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),i(n,[{key:"update",value:function(){this.handleControls()}},{key:"handleControls",value:function(){var e=new o.default(this.position.x,this.position.y);this.currentAnimation="idle",this.GameState.Controls.pressedKeys.includes(r.LEFT_ARROW)&&(this.currentAnimation="run",this.position.x>-(this.GameState.Canvas.cx-this.absoluteOffset.x)&&(this.mirrorX=!0,e.x-=this.moveSpeed)),this.GameState.Controls.pressedKeys.includes(r.RIGHT_ARROW)&&(this.currentAnimation="run",this.position.x<this.GameState.Canvas.cx+this.absoluteOffset.x&&(this.mirrorX=!1,e.x+=this.moveSpeed)),this.position.y>this.initialHeight&&(this.currentAnimation="jump",this.yVelocity-=1),this.position.y<this.initialHeight&&(this.yVelocity=0),this.GameState.Controls.pressedKeys.includes(r.UP_ARROW)&&this.position.y<=this.initialHeight&&(this.yVelocity=30),e.y+=this.yVelocity,this.setPosition(e)}}]),n}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BACKSPACE=8,t.TAB=9,t.ENTER=13,t.SHIFT=16,t.CTRL=17,t.ALT=18,t.CAPSLOCK=20,t.ESCAPE=27,t.SPACEBAR=32,t.PAGE_UP=33,t.PAGE_DOWN=34,t.END=35,t.HOME=36,t.LEFT_ARROW=37,t.UP_ARROW=38,t.RIGHT_ARROW=39,t.DOWN_ARROW=40,t.SELECT=41,t.PRINT=42,t.EXECUTE=43,t.PRINT_SCREEN=44,t.INSERT=45,t.DELETE=46,t.HELP=47,t.NUMBER_0=48,t.NUMBER_1=49,t.NUMBER_2=50,t.NUMBER_3=51,t.NUMBER_4=52,t.NUMBER_5=53,t.NUMBER_6=54,t.NUMBER_7=55,t.NUMBER_8=56,t.NUMBER_9=57,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.NUMPAD_0=96,t.NUMPAD_1=97,t.NUMPAD_2=98,t.NUMPAD_3=99,t.NUMPAD_4=100,t.NUMPAD_5=101,t.NUMPAD_6=102,t.NUMPAD_7=103,t.NUMPAD_8=104,t.NUMPAD_9=105},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.GameState=e,this.isRunning=!1}return i(t,[{key:"init",value:function(){this.isRunning||(this.isRunning=!0,this.render())}},{key:"shouldRender",value:function(){return!this.GameState.isPaused}},{key:"render",value:function(){this.isRunning&&window.requestAnimationFrame(this.render.bind(this)),this.shouldRender()&&(this.GameState.Canvas.clear(),this.GameState.Scene.gameObjects.forEach(function(e){return e.drawEntity()}))}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=n(5),r=(i=o)&&i.__esModule?i:{default:i};var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.GameState=e,this.gameObjects=[]}return a(t,[{key:"init",value:function(){}},{key:"add",value:function(e){e.uuid=(0,r.default)(),e.load(),this.gameObjects.push(e)}},{key:"remove",value:function(t){this.gameObjects.find(function(e){return e.uuid===t}).unload(),this.gameObjects=this.gameObjects.filter(function(e){return e.uuid!==t})}},{key:"clear",value:function(){this.gameObjects=[]}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.GameState=e,this.screens=document.querySelectorAll("[data-screen]"),this.buttons={fullscreen:document.querySelectorAll("[data-gamestate-fullscreen]"),initAudio:document.querySelectorAll("[data-gamestate-init-audio]"),level:document.querySelectorAll("[data-gamestate-change-level]"),mute:document.querySelectorAll("[data-gamestate-mute]"),pause:document.querySelectorAll("[data-gamestate-pause]"),play:document.querySelectorAll("[data-gamestate-play]"),quit:document.querySelectorAll("[data-gamestate-quit]"),restart:document.querySelectorAll("[data-gamestate-restart]"),screens:document.querySelectorAll("[data-ui-target-screen]")},this.isFullscreen=!1}return i(t,[{key:"init",value:function(){this.initListenters(),this.setScreen("mainmenu"),this.updateLevel(this.GameState.levels[this.GameState.level].name)}},{key:"initListenters",value:function(){var t=this;Array.from(this.buttons.initAudio).forEach(function(e){e.addEventListener("click",function(){t.GameState.Audio.isInitialized||t.GameState.Audio.init()})}),Array.from(this.buttons.play).forEach(function(e){e.addEventListener("click",function(){return t.GameState.play()})}),Array.from(this.buttons.pause).forEach(function(e){e.addEventListener("click",function(){return t.GameState.togglePause()})}),Array.from(this.buttons.restart).forEach(function(e){e.addEventListener("click",function(){return t.GameState.restart()})}),Array.from(this.buttons.fullscreen).forEach(function(e){e.addEventListener("click",function(){return t.toggleFullscreen()})}),Array.from(this.buttons.level).forEach(function(e){e.addEventListener("click",function(e){t.GameState.level+=parseInt(e.target.dataset.gamestateChangeLevel,10),t.GameState.level>=t.GameState.levels.length&&(t.GameState.level=0),t.GameState.level<0&&(t.GameState.level=t.GameState.levels.length-1),t.updateLevel(t.GameState.levels[t.GameState.level].name)})}),Array.from(this.buttons.quit).forEach(function(e){e.addEventListener("click",function(){return t.GameState.quit()})}),Array.from(this.buttons.mute).forEach(function(e){e.addEventListener("click",function(e){return t.GameState.Audio.toggleMute()})}),Array.from(this.buttons.screens).forEach(function(e){e.addEventListener("click",t.initTransitions.bind(t))})}},{key:"initTransitions",value:function(e){this.setScreen(e.target.dataset.uiTargetScreen)}},{key:"setScreen",value:function(t){Array.from(this.screens).forEach(function(e){e.dataset.screen===t?e.classList.add("active"):e.classList.remove("active")})}},{key:"toggleFullscreen",value:function(){var e=document.documentElement;this.isFullscreen||(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()),this.isFullscreen&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()),this.isFullscreen=!this.isFullscreen}},{key:"updateScore",value:function(t){var e=document.querySelectorAll('[data-ui="score"]');Array.from(e).forEach(function(e){e.innerHTML=t})}},{key:"updateLevel",value:function(t){t&&Array.from(document.querySelectorAll('[data-ui="level"]')).forEach(function(e){e.innerHTML=t})}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.GameState=e,this.isRunning=!1,this.lastUpdate=Date.now(),this.updateRate=10}return i(t,[{key:"init",value:function(){this.isRunning||(this.isRunning=!0,this.update())}},{key:"calculateDeltaTime",value:function(){var e=Date.now();this.GameState.deltaTime=e-this.lastUpdate,this.lastUpdate=e}},{key:"shouldUpdate",value:function(){return!this.GameState.isPaused}},{key:"update",value:function(){this.isRunning&&window.setTimeout(this.update.bind(this),this.updateRate),this.shouldUpdate()&&(this.calculateDeltaTime(),this.GameState.levels[this.GameState.level].gameLogic(),this.GameState.Scene.gameObjects.forEach(function(e){return e.update()}))}}]),t}();t.default=a}])});